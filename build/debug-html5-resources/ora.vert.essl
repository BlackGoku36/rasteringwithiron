#version 100

uniform mat4 W;
uniform mat4 P;
uniform mat4 V;

varying vec2 TexCoords;
attribute vec2 tex;
varying vec3 WorldPos;
attribute vec3 pos;
varying vec3 Normal;
attribute vec3 nor;

void main()
{
    TexCoords = tex;
    WorldPos = vec3((W * vec4(pos, 1.0)).xyz);
    Normal = mat3(vec3(W[0].x, W[0].y, W[0].z), vec3(W[1].x, W[1].y, W[1].z), vec3(W[2].x, W[2].y, W[2].z)) * nor;
    gl_Position = (P * V) * vec4(WorldPos, 1.0);
}

