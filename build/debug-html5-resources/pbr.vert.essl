#version 100

uniform mat3 N;
uniform mat4 P;
uniform mat4 V;
uniform mat4 W;

varying vec2 TexCoords;
attribute vec2 tex;
varying vec3 WorldPos;
attribute vec3 pos;
varying vec3 Normal;
attribute vec3 nor;

void main()
{
    TexCoords = tex;
    WorldPos = vec3(N * pos);
    Normal = mat3(vec3(N[0].x, N[0].y, N[0].z), vec3(N[1].x, N[1].y, N[1].z), vec3(N[2].x, N[2].y, N[2].z)) * nor;
    gl_Position = ((P * V) * W) * vec4(WorldPos, 1.0);
}

